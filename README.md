# Stata Template

## Overview

This repository serves as a template for reproducible Stata projects, addressing three common challenges:

- **Dependencies**: The `dependencies.do` file ensures all required packages are installed automatically.
- **Portability**: Relative file paths using forward slashes (`"/"`) allow the code to run on any system without modification. Backslashes (`"\"`) should be avoided, as they are only supported on Windows.
- **Documentation**: The README follows the [Social Science Data Editors template](https://social-science-data-editors.github.io/template_README/) (version 1.1) for standardized replication packages.

Addressing these challenges before submission significantly streamlines the review process, saving time and effort for both data editors and authors.

The template includes a working example that downloads FRED macroeconomic data and analyzes the relation between unemployment and inflation, producing one figure and one regression table.

## Data Availability and Provenance Statements

- [ ] This paper does not involve analysis of external data (i.e., no data are used or the only data are generated by the authors via simulation in their code).
- [X] All data are publicly available and downloaded automatically by the replication code.

### Statement about Rights

- [X] I certify that the author(s) of the manuscript have legitimate access to and permission to use the data used in this manuscript. 
- [X] I certify that the author(s) of the manuscript have documented permission to redistribute/publish the data contained within this replication package.

### License for Data

The data are licensed under a CC BY 4.0 license. See LICENSE for details.

### Summary of Availability

- [X] All data **are** publicly available.
- [ ] Some data **cannot be made** publicly available.
- [ ] **No data can be made** publicly available.

### Details on each Data Source

#### Unemployment Rate Data

The unemployment rate data is downloaded from the Federal Reserve Economic Data (FRED) database maintained by the Federal Reserve Bank of St. Louis. The data series UNRATE contains the U.S. civilian unemployment rate as a percentage of the civilian labor force. 

- **Data source**: Federal Reserve Bank of St. Louis, FRED
- **Series ID**: UNRATE
- **URL**: https://fred.stlouisfed.org/series/UNRATE
- **Access**: Public use, no registration required
- **Format**: CSV
- **License**: Public domain (U.S. government data)
- **Download method**: The code automatically downloads the data via the URL

#### Consumer Price Index Data

The Consumer Price Index for All Urban Consumers (CPI-U) data is also sourced from FRED. This series represents the monthly CPI-U index for all items in the U.S. city average.

- **Data source**: Federal Reserve Bank of St. Louis, FRED
- **Series ID**: CPIAUCSL
- **URL**: https://fred.stlouisfed.org/series/CPIAUCSL
- **Access**: Public use, no registration required
- **Format**: CSV
- **License**: Public domain (U.S. government data)
- **Download method**: The code automatically downloads the data via the URL

### Dataset List

| Data file | Source | Notes | Provided |
|-----------|--------|-------|----------|
| `data/raw/unrate_raw.dta` | FRED UNRATE | Downloaded by code | Yes |
| `data/raw/cpi_raw.dta` | FRED CPIAUCSL | Downloaded by code | Yes |
| `data/analysis/macro_analysis.dta` | Derived from above | Merged and processed data with calculated inflation rates | Yes |

## Computational Requirements

### Software Requirements

- [X] The replication package contains one or more programs to install all dependencies and set up the necessary directory structure.

- **Stata** (code was last run with version 18)
  - `esttab` command (from `estout` package)
  - The master program will check for required packages

**Note**: The code requires an active internet connection to download data from FRED.

### Controlled Randomness

- [ ] Random seed is set at line _____ of program ______
- [ ] The analysis relies on random number generation, but setting a seed is not possible
- [X] No pseudo-random number generator is used in the analysis described here.

### Memory, Runtime, Storage Requirements

#### Summary time to reproduce

Approximate time needed to reproduce the analyses on a standard (2025) desktop machine:

- [x] <10 minutes
- [ ] 10-60 minutes
- [ ] 1-2 hours
- [ ] 2-8 hours
- [ ] 8-24 hours
- [ ] 1-3 days
- [ ] 3-14 days
- [ ] > 14 days

#### Summary of required storage space

Approximate storage space needed:

- [x] < 25 MBytes
- [ ] 25 MB - 250 MB
- [ ] 250 MB - 2 GB
- [ ] 2 GB - 25 GB
- [ ] 25 GB - 250 GB
- [ ] > 250 GB

#### Computational Details

The code was last run on a **standard desktop machine with MacOS with an internet connection and at least 100MB of free space**.

## Description of Programs/Code

The replication package contains four Stata do-files:

1. **`code/download_raw_data.do`**: Downloads raw unemployment and CPI data from FRED and saves them as Stata datasets in `data/raw/`
2. **`code/create_analysis_data.do`**: Merges the raw datasets, calculates year-over-year inflation rates, formats dates, and creates the final analysis dataset
3. **`code/analyze_data.do`**: Produces the scatterplot with fitted line and runs the regression analysis
4. **`code/_main.do`**: Master file that runs all programs in sequence and creates a log file

All results are automatically saved to the appropriate directories (`results/figures/`, `results/tables/`, and `results/log/`).

### License for Code

The code is licensed under a MIT license. See LICENSE file for details. 

## Instructions to Replicators

### Directory Structure

The replication package expects the following directory structure (folders will be created automatically if they do not exist):

```
.
├── code/
├── data/
│   ├── raw/
│   └── analysis/
└── results/
    ├── figures/
    ├── tables/
    └── log/
```

### Replication Steps

1. Ensure you have Stata 18 or higher installed
2. Ensure you have an active internet connection (required to download data from FRED)
4. Open Stata and set your working directory to the replication package root folder
5. Run `do "dependencies.do"` to install required packages
6. Run `do "code/_main.do"`

The master file will:
- Download the raw data from FRED
- Process and merge the data
- Generate the figure and regression table
- Create a log file documenting all steps

## List of Tables and Programs

The provided code reproduces:

- [ ] All numbers provided in text in the paper
- [X] All tables and figures in the paper
- [ ] Selected tables and figures in the paper, as explained and justified below.

| Figure/Table # | Program | Line Number | Output file | Note |
|----------------|---------|-------------|-------------|------|
| Figure 1 | code/analyze_data.do | 5-15 | results/figures/unemployment_inflation.png | Scatterplot with fitted line |
| Table 1 | code/analyze_data.do | 20-24 | results/tables/phillips_regression.txt | Regression results |

## References

Federal Reserve Bank of St. Louis (FRED). "Unemployment Rate [UNRATE]." Retrieved from FRED on November 27, 2025. Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/UNRATE.

Federal Reserve Bank of St. Louis (FRED). "Consumer Price Index for All Urban Consumers: All Items in U.S. City Average [CPIAUCSL]." Retrieved from FRED on November 27, 2025. Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/CPIAUCSL.

## Acknowledgements

This README template was adapted from the Social Science Data Editors' README template, available at https://social-science-data-editors.github.io/template_README/
